<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="style.css" type="text/css">
		<title>Wochen Kalender</title>
		<script src="Kalender.js"> </script>
		<script type="text/javascript">
		var tag = new Date();
		var d = tag.getDate()
		var m = tag.getMonth() + 1;
		var y = tag.getYear() + 1900;
		
		Monatsname = new Array("Januar", "Februar", "März", "April", "Mai", "Juni","Juli", "August", "September", "Oktober", "November", "Dezember");
		Wochentag = new Array("Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag", "Sonntag");
		Gruppenmitglieder =new Array("Person 1","Person 2","Person 3","Person 4","Person 5","Person 6","Person 7");
		
		function background(id){
			if(document.getElementById(id).innerHTML=="Neptune"){
				document.getElementById('kalender').style.backgroundImage = "url('img/Neptune.png')";
			}
			else if(document.getElementById(id).innerHTML=="Star-Wars Clone"){
				document.getElementById('kalender').style.backgroundImage = "url('img/Star-Wars_Clone.jpg')";
			}
		}
		function Monatsende(Monat, Jahr){
			var Monatsende = 31;
			if (Monat == 4 || Monat == 6 || Monat == 9 || Monat == 11) --Monatsende; // April(4), Juni(6), September(9), November(11) 30 Tage
			if (Monat == 2) {	//Februar(2)
				Monatsende = Monatsende - 3;
				if (Jahr % 4 == 0) Monatsende++;		//Schaltjahren
				if (Jahr % 100 == 0) Monatsende--;
				if (Jahr % 400 == 0) Monatsende++;
			}
			return Monatsende;
		}
		function WochenKalender(Tag, Monat, Jahr) {
			var jetzt = new Date();		// aktuelles Datum
			var DieserMonat = jetzt.getMonth() + 1;
			var DiesesJahr = jetzt.getYear() + 1900;
			var DieserTag = jetzt.getDate();
			
			var date = new Date(Jahr,Monat-1,Tag);		//der Tag
			var currentThursday = new Date(date.getTime() +(3-((date.getDay()+6) % 7)) * 86400000);
			var yearOfThursday = currentThursday.getFullYear();
			var firstThursday = new Date(new Date(yearOfThursday,0,4).getTime() +(3-((new Date(yearOfThursday,0,4).getDay()+6) % 7)) * 86400000);

			var kW = Math.floor(1 + 0.5 + (currentThursday.getTime() - firstThursday.getTime()) / 86400000/7);
			
			var Zeit = new Date(Jahr, Monat  -1, Tag);
			var Start = Zeit.getDay();		//Wochentag des ersten Tags im Monat
			if (Start > 0) {
				Start--;
			} else {
				Start = 6;}
			Tag = Tag-Start;
			if(Tag <=0){
				Monat--;
				if(Monat <=0){
					Monat=12;
					Jahr--;
				}
				Tag = Monatsende(Monat, Jahr)+Tag;
			}
			var tabelle = document.getElementById('kalender');
			
			if(tabelle.rows.length >0){		//Tabellen inhalt löschen
				for(var i = 0; 0 != tabelle.rows.length; i++){
					tabelle.deleteRow(0);
				}
			}
			var Kopf = Monatsname[Monat-1] + " " + Jahr+ " \n "+ kW+".KW";	//Tabellenüberschrift
			var caption = tabelle.createCaption();
			caption.innerHTML = Kopf;
			
			var zeile = tabelle.insertRow(0);		//Tabellenkopf
			var cells = zeile.insertCell(0);
			cells.innerHTML = "Zeit";
			for (var i = 0; i <= Wochentag.length-1; i++) {		//Wochentag
				var cells = zeile.insertCell(i+1);
				if(Tag > Monatsende(Monat, Jahr)){			
					Tag = 1;
					Monat++;
					if(Monat >=13){
						Monat=1;
						Jahr++;
					}
				}
				var titel = Tag+"."+Monat+"."+Jahr;
				cells.title = titel;
				cells.innerHTML = Wochentag[i];
				Tag++;
			}
			for (var i = 0; i <= 23; i++) {		//Tabellenbody
				
				var zeile = tabelle.insertRow(i+1);
				
				cells = zeile.insertCell(0);
				if(i<=9){
					cells.innerHTML = "0"+i+":00";
				}
				cells.innerHTML = i+":00";	
				
				for (var j = 0; j <= 6; j++) {		//Zellen der Tage
					cells = zeile.insertCell(j+1);
					cells.innerHTML = ' ';
					var day = tabelle.rows[0].cells[j].title;
					cells.className = cells.className + day;
					if(i>=4 && i<=11){
						cells.className = cells.className +' morgen';
					}
					else if(i>=11 && i<=19){
						cells.className = cells.className +' mittag';
					}
					else
						cells.className = cells.className +' nacht';
					if (j>=5) {
						cells.className = cells.className +' wochenende';
					}
				}
			}
		}
		</script>
	</head>
	<body>
		<div>
			<header class= header_hintergrund>
				<img src="img/schriftzug.png" alt="Logo" class="logo">
			</header>
			<nav>
				<section class=kasten>
					<header>
						<h1>Home</h1>
					</header>
					<hr>
					<div>							
						<a href="Eventübersicht.html">Event Übersicht</a><br>
						<a href="index.html">mein Kalender</a><br>
					</div>
				</section>
				<section class=kasten>
					<header>
						<h1>Ansicht</h1>
					</header>
					<hr>
					<div>
						<a href="MonatsKalender.html">Monats Ansicht</a><br>
						<a href="JahresKalender.html">Jahres Ansicht</a><br>
					</div>
				</section>
				<section class=kasten>
					<header>
						<h1>Kalender Hintergrund</h1>
					</header>
					<hr>
					<div>
						<a onclick="background('neptune')" id="neptune"  href="#">Neptune</a><br>
						<a onclick="background('Star-Wars Clone')" id="Star-Wars Clone"  href="#">Star-Wars Clone</a>
					</div>
				</section>
			</nav>
			<inhalt>
				<div class=pfeile>
					<div id=pfeil_zurueck>
						<a onclick="Wochen_wechsel(false)" href="#">
							<img src="img/icon/left.png" title="letzte Woche">
							letzte Woche
						</a>
					</div>
					<div id=pfeil_vor>
						<a onclick="Wochen_wechsel(true)" href="#">
							nächste Woche
							<img src="img/icon/right.png" title="nächste Woche">
						</a>
					</div>						
				</div>
				<div class=kasten>
					<table id=kalender align="center" >
						<tbody  style="background-color: #28b2ff24;"> </tbody> 
					</table>
					<script type="text/javascript">
						WochenKalender(d, m, y);
					</script>
				</div>
				<div class=pfeile>
					<div id=pfeil_zurueck>
						<a onclick="Wochen_wechsel(false)" href="#">
							<img src="img/icon/left.png" title="letzte Woche">
							letzte Woche
						</a>
					</div>
					<div id=pfeil_vor>
						<a onclick="Wochen_wechsel(true)" href="#">
							nächste Woche
							<img src="img/icon/right.png" title="nächste Woche">
						</a>
					</div>					
				</div>
				<br>
				<br>
			</inhalt>
		</div>
	</body>
</html>